<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EngHar_SIM - Circuit Designer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <img src="logo.png" alt="EngHar_SIM Logo">
        <h1>EngHar_SIM - Circuit Designer</h1>
    </header>
    
    <main>
        <form id="circuitForm">
            <h2>Input Components</h2>
            <div>
                <label for="resistors">Resistors (R) - Comma Separated:</label>
                <input type="text" id="resistors" placeholder="e.g., 5.6, 10.2, 3.3">
            </div>
            <div>
                <label for="resistor_arrangement">Resistor Arrangement:</label>
                <select id="resistor_arrangement">
                    <option value="series">Series</option>
                    <option value="parallel">Parallel</option>
                </select>
            </div>
            <div>
                <label for="voltage">Voltage (V):</label>
                <input type="text" id="voltage" placeholder="e.g., 12.0">
            </div>
            <button type="button" onclick="generateCircuit()">Generate Circuit Diagram</button>
        </form>

        <canvas id="circuitCanvas" width="800" height="600" style="border:1px solid #000; margin-top: 20px;"></canvas>
        <br>
        <button id="downloadBtn" style="display:none; margin-top: 10px;">Download Circuit Diagram</button>
    </main>

    <footer>
        <p>© 2024 EngHar_SIM. All rights reserved.</p>
    </footer>

    <script>
        function generateCircuit() {
            const canvas = document.getElementById('circuitCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const resistors = document.getElementById('resistors').value.split(',');
            const voltage = document.getElementById('voltage').value;
            const arrangement = document.getElementById('resistor_arrangement').value;

            // Draw the voltage source
            ctx.beginPath();
            ctx.arc(100, 300, 40, 0, 2 * Math.PI);  // Draw a circle for the voltage source
            ctx.moveTo(60, 300);
            ctx.lineTo(140, 300);
            ctx.stroke();
            ctx.fillText(`V: ${voltage} V`, 60, 290);  // Label the voltage source

            let startX = 140;  // Starting position for the resistors
            const stepX = 120;  // Space between components

            // Draw resistors
            resistors.forEach((resistor, index) => {
                ctx.moveTo(startX, 270);
                ctx.lineTo(startX + 60, 270);
                ctx.lineTo(startX + 60, 330);
                ctx.lineTo(startX, 330);
                ctx.lineTo(startX, 270);
                ctx.stroke();
                ctx.fillText(`R${index + 1}: ${resistor} Ω`, startX + 15, 260);
                startX += stepX;
            });

            // Draw the connecting wires
            ctx.moveTo(startX, 300);
            ctx.lineTo(startX + 60, 300);
            ctx.lineTo(100, 300);  // Closing the circuit
            ctx.stroke();

            document.getElementById('downloadBtn').style.display = 'inline';
            document.getElementById('downloadBtn').onclick = function() {
                const link = document.createElement('a');
                link.download = 'circuit_diagram.png';
                link.href = canvas.toDataURL();
                link.click();
            };
        }
    </script>
</body>
</html>
